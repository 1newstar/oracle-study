# Startup

> 数据库的启动过程分为三个阶段

- 启动实例：读取参数文件，分配SGA，启动后台进程
- 装载数据库：装载数据库是将数据库与已启动的实例相联系，打开控制文件。数据库装载后，数据库保持关闭状态。
- 打开数据库：此步骤使用数据库可以进行正常的操作的处理。主要是打开数据库文件和日志文件。 

> 启动数据库的顺序

**参数文件-控制文件-日志文件和数据文件**

SHUTDOWN => NOMOUNT => MOUNT=> OPEN

```oracle
STARTUP [NOMOUNT|MOUNT|OPEN|FORCE|RESTRICT] [PFILE='pfile_name'];
```

> [归档模式](../sql_demo/mgmt/architecture.sql)

# Shutdown

> 数据库的关闭过程

- 关闭数据库
- 卸载数据库
- 关闭数据库实例

```oracle
SHUTDOWN [NORMAL|TRANSACTIONAL|IMMEDIATE|ABORT]
```

> 关闭方式

1、NORMAL关闭方式
NORMAL关闭方式是正常关闭方式，是默认关闭方式。
在这种关机方式下，数据库服务器必须等待所有客户端从Oracle中正常退出时，才可以关闭数据库。

2、IMMEDIATE关闭方式
使用这种方式关闭数据库时，系统将连接到数据库的所有用户尚未提交的事务全部回退，
中断连接会话，清理资源，然后关闭数据库。

3、TRANSACTIONAL关闭方式
在这种关机方式中，数据库必须等待所有的客户运行的事务结束，提交或回退。

4、ABORT关闭方式
ABORT关闭方式为终止方式，使用这种方式关闭数据库时，系统立即将数据库实例关闭，
对事务数据完整性不作检查。是最快的关机方式，相当于直接kill进程。
但是要注意如果此时有操作，可能引起文件状态不一致，重启需要较长时间恢复，
甚至在大量IO时引起文件块逻辑坏块。